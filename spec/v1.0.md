
# ðŸ“œ IMAGXP Protocol Specification (v1.0)
**Status**: Stable / Draft
**Version**: 1.0.0
**Last Updated**: 2026-01-26

---

## 1. Abstract
The **Identity Monetization Auto Governance Exchange Protocol (IMAGXP)** is an application-layer standard that enables autonomous negotiation between Content Owners ("Publishers") and Artificial Intelligence Agents ("Visitors").

It replaces manual scraping and blocking with a cryptographic handshake, enabling:
1.  **Identity**: Proof of Domain Ownership (Anti-Spoofing).
2.  **Monetization**: Automated Micro-payments via Brokers (AdSense for Data).
3.  **Quality**: Automated Dispute Resolution for low-quality data (Spam Protection).

---

## 2. Core Protocol Integrity
The protocol operates on standard HTTP/1.1 and HTTP/2 transport layers.

### 2.1 The Trust Anchor (DNS Binding)
Every Agent MUST host a public Identity Manifest at a well-known location. This binds the Cryptographic Key to the Domain Name.

**Manifest Location**: `https://<agent-domain>/.well-known/imagxp-agent.json`

**Manifest Schema**:
```json
{
  "agent_id": "openai.com",
  "public_key": "MFKwEwYHKoZIzj0CAQYIKoZIzj0DAQcDQgAE...",
  "contact": "security@openai.com",
  "version": "1.0"
}
```

### 2.2 The Handshake (Request Headers)
All IMAGXP-compliant requests MUST include the following headers:

| Header | Description | Required |
| :--- | :--- | :--- |
| `User-Agent` | Must contain "IMAGXP/1.0". | Yes |
| `x-imagxp-payload` | Base64 encoded JSON (The Claim). | Yes |
| `x-imagxp-signature` | ECDSA Signature of the Canonically Serialized (RFC 8785) Payload. | Yes |
| `x-imagxp-payment` | JWT Credential from a Broker (if paid). | Optional |

**The Payload Structure**:
```json
{
  "agent_id": "openai.com",
  "purpose": "RAG_RETRIEVAL", 
  "ts": "2026-01-26T12:00:00.000Z",
  "nonce": "e4b47c6e-826a-4638-a28a-6b89694ce22c"
}
```

---

## 3. Monetization Layer (The Broker Protocol)
*New in v1.1*

To solve the "Micro-Transaction Problem" (sending $0.001 is too expensive), IMAGXP v1.0 introduces the **Broker Role**.

### 3.1 Broker Architecture
A Broker is a trusted third-party Clearing House that holds capital (Bonds) from Agents and issues "Visas" (Tokens) to Publishers.

### 3.2 The Payment Flow
1.  **Liquidity**: Agent deposits funds into Broker.
2.  **Issuance**: Broker issues a standard JWT (JSON Web Token) to the Agent.
    *   **Issuer (`iss`)**: `https://broker.imagxp.network`
    *   **Audience (`aud`)**: `https://target-publisher.com`
3.  **Presentation**: Agent sends this token in `x-imagxp-payment`.
4.  **Verification**: Publisher verifies the JWT signature using the Broker's JWKS.
    *   **JWKS Endpoint**: `https://<broker-domain>/.well-known/jwks.json`

### 3.3 Security Model
*   **Asymmetrical Trust**: The Publisher simply validates the cryptographic signature. The Broker handles the financial infrastructure.
*   **Replay Protection**: Brokers MUST use short-lived tokens (exp < 1 hour) or implement nonce tracking.

---

## 4. Quality Assurance Layer (The Dispute Protocol)
*New in v1.0*

To prevent "Model Collapse" (AI training on garbage data), Agents pay only for High-Quality Data.

### 4.1 The Feedback Loop
If an Agent receives content that measures as "Spam" or "Low Quality", it issues a **Signed Dispute**.

**Feedback Header**: `x-imagxp-feedback`

**Structure**:
```json
{
  "url": "https://pub.com/slop-article",
  "quality_score": 0.1,    // 0.0 to 1.0
  "reason": "LOW_QUALITY_SPAM",
  "signature": "..."       // Signed by Agent
}
```

### 4.2 Settlement
*   **High Score (> 0.5)**: Payment is released (Broker credits Publisher).
*   **Low Score (< 0.5)**: Payment is withheld. The Signed Dispute serves as cryptographic evidence for the audit log.

---

## 5. Security Considerations
### 5.1 Playback Attacks
**Risk**: Attacker copies a valid request.
**Mitigation**: Publishers MUST reject payloads where `timestamp` is older than 300 seconds (5 minutes).

### 5.2 Key Compromise
**Risk**: Attacker steals Agent's Private Key.
**Mitigation**: Agents MUST rotate keys. The `.well-known` manifest allows instant key rotation propagation.

---

## 6. Implementation Reference 
*   **Standard SDK**: `@imagxp/protocol` (NPM)
*   **Transport**: HTTPS Only (TLS 1.0+)
*   **Signing Standard**: ECDSA (P-256) or Ed25519.
